type: runtime.runner_cli_contract
version: 1
required:
  - version
  - canonical_binary
  - required_commands
  - optional_capabilities
  - formatter_contract
  - output_contract
properties:
  version:
    type: integer
    const: 1
  canonical_binary:
    type: string
    const: dc-runner
  required_commands:
    type: array
    minItems: 1
    items:
      type: object
      required: [command, must_support]
      properties:
          command:
            type: string
            minLength: 1
        must_support:
          type: boolean
  optional_capabilities:
    type: array
    items:
      type: string
      minLength: 1
  formatter_contract:
    type: object
    required: [command, modes, scope]
    properties:
      command:
        type: string
        const: schema
      modes:
        type: array
        minItems: 3
        items:
          type: string
      scope:
        type: object
        required: [spec_version, levels, reorder_array_items]
        properties:
          spec_version:
            type: integer
            const: 1
          levels:
            type: array
            minItems: 2
            items:
              type: string
          reorder_array_items:
            type: boolean
            const: false
  output_contract:
    type: object
    required: [structured_mode_flag, stdout_json_keys, unknown_command_exit_non_zero]
    properties:
      structured_mode_flag:
        type: string
        minLength: 1
      stdout_json_keys:
        type: array
        minItems: 1
        items:
          type: string
          minLength: 1
      unknown_command_exit_non_zero:
        type: boolean
