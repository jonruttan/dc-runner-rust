version: 1
title: resolved_bundle_lock_v1
type: object
required:
  - version
  - root_bundle
  - runner
  - source
  - resolved_order
  - integrity
properties:
  version:
    type: integer
    const: 1
  root_bundle:
    type: string
    minLength: 1
  runner:
    type: string
    enum:
      - python
      - php
      - rust
  source:
    type: object
    required:
      - repo
      - ref
      - commit
    properties:
      repo:
        type: string
        minLength: 1
      ref:
        type: string
        minLength: 1
      commit:
        type: string
        minLength: 1
  resolved_order:
    type: array
    items:
      type: string
      minLength: 1
  integrity:
    type: object
    required:
      - file_count
      - sha256_manifest
      - sha256_manifests
      - declaration_sha256
    properties:
      file_count:
        type: integer
        minimum: 0
      sha256_manifest:
        type: string
        minLength: 1
      sha256_manifests:
        type: string
        minLength: 1
      declaration_sha256:
        type: string
        minLength: 1
      declaration_paths:
        type: array
        minItems: 1
        items:
          type: string
          minLength: 1
